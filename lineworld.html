<html lang="en">
 <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Lineworld TD</title>
  <meta name="description" content="">
  <meta name="author" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- jquery and jqueryui -->
  <script src="external/jquery-2.1.3.min.js"></script>
  <link href="external/jquery-ui.min.css" rel="stylesheet">
  <script src="external/jquery-ui.min.js"></script>

  <!-- bootstrap -->
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">

  <!-- d3js -->
  <script type="text/javascript" src="external/d3.min.js"></script>

  <!-- markdown -->
  <script type="text/javascript" src="external/marked.js"></script>
  <script type="text/javascript" src="external/highlight.pack.js"></script>
  <link rel="stylesheet" href="external/highlight_default.css">
  <script>hljs.initHighlightingOnLoad();</script>

  <!-- rljs -->
  <!-- script type="text/javascript" src="lib/rl.js"></script-->
<script type="text/javascript" src="lib/Agents/recurrent.js"></script>
<script type="text/javascript" src="lib/Agents/LineWorldTDAgent.js"></script>

  <!-- flotjs -->
  <script src="external/jquery.flot.min.js"></script>

  
  <link rel="stylesheet" href="lib/lineworld/lineworld_td.css">  
  <script src="lib/lineworld/lineworld_td.js"></script>

 </head>
<body onload="start();">
  
  <div id="wrap">

   <h2>Temporal Difference Learning Lineworld Demo</h2>
   <br>

	<textarea id="agentspec" style="width:100%;height:270px;">
	// agent parameter spec to play with (this gets eval()'d on Agent reset)
	var spec = {}
	spec.update = 'qlearn'; // 'qlearn' or 'sarsa'
	spec.gamma = 0.9; // discount factor, [0, 1)
	spec.epsilon = 0.2; // initial epsilon for epsilon-greedy policy, [0, 1)
	spec.alpha = 0.1; // value function learning rate
	spec.lambda = 0; // eligibility trace decay, [0,1). 0 = no eligibility traces
	spec.replacing_traces = true; // use replacing or accumulating traces
	spec.planN = 50; // number of planning steps per iteration. 0 = no planning

	spec.smooth_policy_update = true; // non-standard, updates policy smoothly to follow max_a Q
	spec.beta = 0.1; // learning rate for smooth policy update
	</textarea>

   <button class="btn btn-danger" onclick="resetAgent()" style="width:150px;height:50px;margin-bottom:5px;">Reinit agent</button>
   <button class="btn btn-primary" onclick="tdlearn()" style="width:170px;height:50px;margin-bottom:5px;">Toggle TD Learning</button>
   <button class="btn btn-success" onclick="gofast()" style="width:150px;height:50px;margin-bottom:5px;">Go fast</button>
   <button class="btn btn-success" onclick="gonormal()" style="width:150px;height:50px;margin-bottom:5px;">Go normal</button>
   <button class="btn btn-success" onclick="goslow()" style="width:150px;height:50px;margin-bottom:5px;">Go slow</button>
   
   
   <br>
   Exploration epsilon: <span id="eps">0.15</span> <div id="slider"></div>

   <br><br>

   <div id="draw"></div>

   <div id="rewardui">
   Cell reward: <span id="creward">(select a cell)</span> <div id="rewardslider"></div>
   </div>

   <div>
      Total reward
     <div id="flotreward" style="width:800px; height: 400px;"></div>
   </div>
   </div>
   <br><br><br><br><br>
 </body>
</html>